<div class="budget-container" *ngIf="budgetData">
  <h4>Budget Items</h4>

  <div class="budget-item"
       *ngFor="let item of budgetData.items; let i = index; trackBy: trackByIndex">
    <label>Category:</label>
    <select [(ngModel)]="item.categoryId"
            name="budgetCategory{{i}}"
            required>
      <option [ngValue]="null">-- Select category --</option>
      <option *ngFor="let cat of getAvailableCategories(item)"
              [ngValue]="cat.id">
        {{ cat.name }}
      </option>
    </select>

    <label>Amount:</label>
    <input type="number"
           [(ngModel)]="item.amount"
           name="budgetAmount{{i}}"
           (input)="updateTotalBudget()"
           (focus)="removeIfZero(i)" />

    <button class="remove-activity"
            type="button"
            (click)="removeBudgetItem(i)">
      Remove
    </button>
  </div>

  <button type="button"
          (click)="addBudgetItem()"
          [disabled]="budgetData.items.length >= suggestedCategories.length">
    + Add budget item
  </button>

  <p class="budget-total">
    <strong>Total Budget:</strong> {{ budgetData.total }}
  </p>

  <button type="button" (click)="confirmBudget()">Confirm budget</button>
</div>
